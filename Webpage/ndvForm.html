<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suchanaa Forms</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            padding-top: 20px;
        }

        .header-container {
            text-align: center;
            margin-bottom: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 0;
        }

        .logo {
            width: 255px;
            height: auto;
            margin-bottom: 1.5rem;
        }

        .nav-container {
            width: 100%;
            margin: 0 auto;
        }

        .container {
            max-width: 800px;
            background-color: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            margin: 1rem auto 2rem;
        }

        .form-header {
            text-align: center;
            margin: 1rem 0 2rem;
            position: relative;
        }

        h1 {
            color: #007bff;
            margin-bottom: 1rem;
            font-size: 2.5rem;
            font-weight: 600;
        }

        .header-line {
            height: 4px;
            width: 100px;
            background: linear-gradient(to right, #007bff, #00a6ff);
            margin: 0 auto;
            border-radius: 2px;
        }

        .form-label {
            font-weight: 500;
            color: #2c3e50;
        }

        .card {
            border: 1px solid rgba(0, 0, 0, 0.125);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            margin-bottom: 1.5rem;
        }

        .card-header {
            background-color: #e3f2fd;
            font-weight: 500;
            color: #0056b3;
        }

        .btn-primary {
            padding: 0.5rem 2rem;
            font-weight: 500;
            background: linear-gradient(to right, #007bff, #00a6ff);
            border: none;
            transition: transform 0.2s;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            background: linear-gradient(to right, #0056b3, #007bff);
        }

        .success-message {
            display: none;
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #28a745;
            color: white;
            padding: 1rem 2rem;
            border-radius: 5px;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .nav-tabs {
            margin-bottom: 0;
            border-bottom: none;
            display: flex;
            width: 100%;
        }

        .nav-tabs .nav-item {
            flex: 1;
            width: 33.333%;
        }

        .nav-tabs .nav-link {
            color: #495057;
            font-weight: 500;
            border: none;
            padding: 1rem 0.5rem;
            margin-right: 0;
            text-align: center;
            width: 100%;
            white-space: nowrap;
        }

        .nav-tabs .nav-link.active {
            color: #007bff;
            border-bottom: 3px solid #007bff;
            font-weight: 700;
        }

        .tab-content {
            padding-top: 1rem;
        }

        .form-section {
            display: none;
        }

        .form-section.active {
            display: block;
        }

        .file-upload {
            border: 2px dashed #dee2e6;
            padding: 1.5rem;
            text-align: center;
            border-radius: 5px;
            background-color: #f8f9fa;
        }

        .loading-spinner {
            display: none;
            width: 1rem;
            height: 1rem;
            margin-left: 0.5rem;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: inline-block;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .col-md-4, .col-md-6 {
                margin-bottom: 1rem;
            }
            
            .row > [class*="col-"]:last-child {
                margin-bottom: 0;
            }
        }

        .error-container {
            margin-top: 1rem;
            font-size: 0.9rem;
        }

        .error-container div {
            margin-bottom: 0.25rem;
        }

        .invalid-feedback {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header-container">
            <img src="https://suchanaa.com/filer/canonical/1740984420/2382/" alt="Suchanaa Logo" class="logo">
            <div class="nav-container">
                <ul class="nav nav-tabs" id="formTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="vacancy-tab" data-bs-toggle="tab" data-bs-target="#vacancy" type="button" role="tab">Vacancy</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="notice-tab" data-bs-toggle="tab" data-bs-target="#notice" type="button" role="tab">Notice</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="directory-tab" data-bs-toggle="tab" data-bs-target="#directory" type="button" role="tab">Directory</button>
                    </li>
                </ul>
            </div>
        </div>

        <div class="tab-content" id="formTabsContent">
            <!-- Vacancy Form Tab -->
            <div class="tab-pane fade show active" id="vacancy" role="tabpanel">
                <div class="form-header">
                    <h1>Vacancy Form</h1>
                    <div class="header-line"></div>
                </div>

                <form id="vacancyForm" class="needs-validation" novalidate method="POST" action="your-web-app-url" enctype="multipart/form-data">
                    <div class="mb-4">
                        <label class="form-label">Are you posting for the first time in Suchanaa.com?*</label>
                        <div class="d-flex gap-4">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="is_first_time" id="firstTimeYes" value="yes" required>
                                <label class="form-check-label" for="firstTimeYes">Yes</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="is_first_time" id="firstTimeNo" value="no" required>
                                <label class="form-check-label" for="firstTimeNo">No</label>
                            </div>
                        </div>
                        <div class="alert alert-info mt-3 directory-prompt" style="display: none;">
                            Please fill out the Directory Form first. After submitting the Directory Form, you can come back to submit your vacancy.
                            <button type="button" class="btn btn-link" onclick="switchToDirectory()">Go to Directory Form</button>
                        </div>
                    </div>

                    <div class="form-content" style="display: none;">
                        <div class="mb-3">
                            <label for="company_name" class="form-label">Company Name*</label>
                            <input type="text" class="form-control" id="company_name" name="company_name" required>
                        </div>

                        <div class="mb-3">
                            <label for="vacancy_title" class="form-label">Vacancy Title*</label>
                            <input type="text" class="form-control" id="vacancy_title" name="vacancy_title" required>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="start_date" class="form-label">Start Date*</label>
                                <input type="date" class="form-control" id="start_date" name="start_date" required>
                            </div>
                            <div class="col-md-6">
                                <label for="deadline" class="form-label">Deadline*</label>
                                <input type="date" class="form-control" id="deadline" name="deadline" required>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="job_level" class="form-label">Job Level*</label>
                                <select class="form-select" id="job_level" name="job_level" required>
                                    <option value="">Select Job Level</option>
                                    <option value="Entry Level">Entry Level</option>
                                    <option value="Mid Level">Mid Level</option>
                                    <option value="Senior Level">Senior Level</option>
                                    <option value="Top Level">Top Level</option>
                                </select>
                            </div>

                            <div class="col-md-6">
                                <label for="job_type" class="form-label">Job Type*</label>
                                <select class="form-select" id="job_type" name="job_type" required>
                                    <option value="">Select Job Type</option>
                                    <option value="Full Time">Full Time</option>
                                    <option value="Part Time">Part Time</option>
                                    <option value="Contract">Contract</option>
                                    <option value="Freelance">Freelance</option>
                                    <option value="Internship">Internship</option>
                                    <option value="Temporary">Temporary</option>
                                    <option value="Remote">Remote</option>
                                    <option value="On-site">On-site</option>
                                    <option value="Hybrid">Hybrid</option>
                                </select>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="category" class="form-label">Category*</label>
                            <select class="form-select" id="category" name="category" required>
                                <option value="">Select Category</option>
                                <option value="Administrative & Clerical">Administrative & Clerical</option>
                                <option value="Finance & Accounting">Finance & Accounting</option>
                                <option value="Healthcare & Medical">Healthcare & Medical</option>
                                <option value="Executive & Management">Executive & Management</option>
                                <option value="Engineering & Technical">Engineering & Technical</option>
                                <option value="Education & Training">Education & Training</option>
                                <option value="Marketing & Sales">Marketing & Sales</option>
                                <option value="Human Resources">Human Resources</option>
                                <option value="Legal & Compliance">Legal & Compliance</option>
                                <option value="Retail & Customer Service">Retail & Customer Service</option>
                                <option value="Technology & IT">Technology & IT</option>
                                <option value="Creative & Design">Creative & Design</option>
                                <option value="Manufacturing & Production">Manufacturing & Production</option>
                                <option value="Construction & Trades">Construction & Trades</option>
                                <option value="Transportation & Logistics">Transportation & Logistics</option>
                                <option value="Hospitality & Tourism">Hospitality & Tourism</option>
                                <option value="Research & Development">Research & Development</option>
                                <option value="Non-Profit & Community Services">Non-Profit & Community Services</option>
                                <option value="Environmental & Sustainability">Environmental & Sustainability</option>
                                <option value="Real Estate">Real Estate</option>
                                
                            </select>
                        </div>

                        <div class="card mb-3">
                            <div class="card-header">
                                Short Description
                            </div>
                            <div class="card-body">
                                <textarea class="form-control" id="short_description" name="short_description" rows="3" required></textarea>
                            </div>
                        </div>

                        <div class="card mb-3">
                            <div class="card-header">
                                Basic Information
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="no_of_positions" class="form-label">No. of Positions*</label>
                                            <input type="number" class="form-control" id="no_of_positions" name="no_of_positions" required>
                                        </div>

                                        <div class="mb-3">
                                            <label for="working_hours" class="form-label">Working Hours*</label>
                                            <input type="text" class="form-control" id="working_hours" name="working_hours" required>
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="job_location" class="form-label">Job Location*</label>
                                            <input type="text" class="form-control" id="job_location" name="job_location" required>
                                        </div>

                                        <div class="mb-3">
                                            <label for="offered_salary" class="form-label">Offered Salary*</label>
                                            <input type="text" class="form-control" id="offered_salary" name="offered_salary" required>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card mb-3">
                            <div class="card-header">
                                Job Description
                            </div>
                            <div class="card-body">
                                <textarea class="form-control" id="job_description" name="job_description" rows="4" required></textarea>
                            </div>
                        </div>

                        <div class="card mb-3">
                            <div class="card-header">
                                Requirements
                            </div>
                            <div class="card-body">
                                <textarea class="form-control" id="requirements" name="requirements" rows="4" required></textarea>
                            </div>
                        </div>

                        <div class="card mb-3">
                            <div class="card-header">
                                Responsibilities
                            </div>
                            <div class="card-body">
                                <textarea class="form-control" id="responsibilities" name="responsibilities" rows="4" required></textarea>
                            </div>
                        </div>

                        <div class="card mb-3">
                            <div class="card-header">
                                Others
                            </div>
                            <div class="card-body">
                                <textarea class="form-control" id="others" name="others" rows="4"></textarea>
                            </div>
                        </div>

                        <div class="text-center">
                            <button type="submit" class="btn btn-primary">Submit</button>
                            <div class="loading-spinner"></div>
                        </div>
                    </div>
                </form>

                <div id="vacancySuccessMessage" class="success-message">
                    Form submitted successfully!
                </div>
            </div>

            <!-- Notice Form Tab -->
            <div class="tab-pane fade" id="notice" role="tabpanel">
                <div class="form-header">
                    <h1>Notice Form</h1>
                    <div class="header-line"></div>
                </div>

                <form id="noticeForm" class="needs-validation" novalidate method="POST" action="your-web-app-url" enctype="multipart/form-data">
                    <div class="mb-4">
                        <label class="form-label">Are you posting for the first time in Suchanaa.com?*</label>
                        <div class="d-flex gap-4">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="is_first_time" id="noticeFirstTimeYes" value="yes" required>
                                <label class="form-check-label" for="noticeFirstTimeYes">Yes</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="is_first_time" id="noticeFirstTimeNo" value="no" required>
                                <label class="form-check-label" for="noticeFirstTimeNo">No</label>
                            </div>
                        </div>
                        <div class="alert alert-info mt-3 directory-prompt" style="display: none;">
                            Please fill out the Directory Form first. After submitting the Directory Form, you can come back to submit your notice.
                            <button type="button" class="btn btn-link" onclick="switchToDirectory()">Go to Directory Form</button>
                        </div>
                    </div>

                    <div class="form-content" style="display: none;">
                        <div class="mb-3">
                            <label for="notice_company_name" class="form-label">Company Name*</label>
                            <input type="text" class="form-control" id="notice_company_name" name="notice_company_name" required>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="publish_date" class="form-label">Publish Date*</label>
                                <input type="date" class="form-control" id="publish_date" name="publish_date" required>
                            </div>
                            <div class="col-md-6">
                                <label for="notice_deadline" class="form-label">Deadline*</label>
                                <input type="date" class="form-control" id="notice_deadline" name="notice_deadline" required>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="notice_category" class="form-label">Category*</label>
                                <select class="form-select" id="notice_category" name="notice_category" required>
                                    <option value="">Select Category</option>
                                    <option value="Tender">Tender</option>
                                    <option value="Quotation">Quotation</option>
                                    <option value="Proposal">Proposal</option>
                                    <option value="Standing List">Standing List</option>
                                    <option value="Intend to Award">Intend to Award</option>
                                    <option value="Expression of Interest">Expression of Interest</option>
                                    <option value="Opening of Financial Proposal">Opening of Financial Proposal (OFP)</option>
                                    <option value="Amendment">Amendment</option>
                                    <option value="Auction">Auction</option>
                                    <option value="Others">Others</option>
                                    <option value="Loksewa">Loksewa</option>
                                    <option value="Education">Education</option>
                                    <option value="Stock">Stock</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="notice_subcategory" class="form-label">Subcategory*</label>
                                <select class="form-select" id="notice_subcategory" name="notice_subcategory" required>
                                    <option value="">Select Subcategory</option>
                                    <option value="Construction and Upgrading">Construction and Upgrading</option>
                                    <option value="Printing & Publishing">Printing & Publishing</option>
                                    <option value="Interior Design & Decoration">Interior Design & Decoration</option>
                                    <option value="Painting & Coatings">Painting & Coatings</option>
                                    <option value="Equipment Supply & Maintenance">Equipment Supply & Maintenance</option>
                                    <option value="IT & Technology">IT & Technology</option>
                                    <option value="Healthcare & Medical Supplies">Healthcare & Medical Supplies</option>
                                    <option value="Education & Training">Education & Training</option>
                                    <option value="Manufacturing & Production">Manufacturing & Production</option>
                                    <option value="Energy & Utilities">Energy & Utilities</option>
                                    <option value="Transportation & Logistics">Transportation & Logistics</option>
                                    <option value="Real Estate & Property Management">Real Estate & Property Management</option>
                                    <option value="Hospitality & Tourism">Hospitality & Tourism</option>
                                    <option value="Retail & Consumer Services">Retail & Consumer Services</option>
                                    <option value="Environmental Services">Environmental Services</option>
                                    <option value="Agriculture & Farming">Agriculture & Farming</option>
                                    <option value="Telecommunications">Telecommunications</option>
                                    <option value="Legal & Financial Services">Legal & Financial Services</option>
                                    <option value="Stationery & Office Supplies">Stationery & Office Supplies</option>
                                    <option value="Marketing & Advertising">Marketing & Advertising</option>
                                    <option value="Human Resources">Human Resources</option>
                                </select>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Notice Images*</label>
                            <div class="file-upload">
                                <input type="file" class="form-control" id="notice_images" name="notice_images" accept="image/*" multiple required>
                                <small class="text-muted">You can select multiple images</small>
                            </div>
                        </div>

                        <div class="text-center">
                            <button type="submit" class="btn btn-primary">Submit</button>
                            <div class="loading-spinner"></div>
                        </div>
                    </div>
                </form>

                <div id="noticeSuccessMessage" class="success-message">
                    Form submitted successfully!
                </div>
            </div>

            <!-- Directory Form Tab -->
            <div class="tab-pane fade" id="directory" role="tabpanel">
                <div class="form-header">
                    <h1>Directory Form</h1>
                    <div class="header-line"></div>
                </div>

                <form id="directoryForm" class="needs-validation" novalidate method="POST" action="your-web-app-url" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="company_english_name" class="form-label">Company English Name*</label>
                        <input type="text" class="form-control" id="company_english_name" name="company_english_name" required>
                    </div>

                    <div class="mb-3">
                        <label for="company_nepali_name" class="form-label">Company Nepali Name*</label>
                        <input type="text" class="form-control" id="company_nepali_name" name="company_nepali_name" required>
                    </div>

                    <div class="mb-3">
                        <label for="company_type" class="form-label">Company Type*</label>
                        <select class="form-select" id="company_type" name="company_type" required>
                            <option value="">Select Company Type</option>
                            <option value="Restaurants & Hotels">Restaurants & Hotels</option>
                            <option value="Health & Medical">Health & Medical</option>
                            <option value="Finance & Insurance">Finance & Insurance</option>
                            <option value="Legal Services">Legal Services</option>
                            <option value="Retail & Shopping">Retail & Shopping</option>
                            <option value="Real Estate & Property">Real Estate & Property</option>
                            <option value="Automotive">Automotive</option>
                            <option value="Education & Training">Education & Training</option>
                            <option value="Entertainment & Leisure">Entertainment & Leisure</option>
                            <option value="Travel & Transportation">Travel & Transportation</option>
                            <option value="Home Services">Home Services</option>
                            <option value="Professional Services">Professional Services</option>
                            <option value="Construction & Contractors">Construction & Contractors</option>
                            <option value="Arts & Crafts">Arts & Crafts</option>
                            <option value="NGO, INGO & Social Services">NGO, INGO & Social Services</option>
                            <option value="Technology & Electronics">Technology & Electronics</option>
                            <option value="Beauty & Personal Care">Beauty & Personal Care</option>
                            <option value="Environment & Sustainability">Environment & Sustainability</option>
                            <option value="Sports & Fitness">Sports & Fitness</option>
                            <option value="Agriculture & Farming">Agriculture & Farming</option>
                            <option value="Embassies & Consulates">Embassies & Consulates</option>
                            <option value="Government">Government</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="address" class="form-label">Address*</label>
                        <textarea class="form-control" id="address" name="address" rows="3" required></textarea>
                    </div>

                    <div class="mb-3">
                        <div class="row">
                            <div class="col-md-4 mb-3 mb-md-0">
                                <label for="phone1" class="form-label">Phone 1*</label>
                                <input type="tel" class="form-control" id="phone1" name="phone1" required>
                            </div>
                            <div class="col-md-4 mb-3 mb-md-0">
                                <label for="phone2" class="form-label">Phone 2</label>
                                <input type="tel" class="form-control" id="phone2" name="phone2">
                            </div>
                            <div class="col-md-4">
                                <label for="phone3" class="form-label">Phone 3</label>
                                <input type="tel" class="form-control" id="phone3" name="phone3">
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <div class="row">
                            <div class="col-md-6 mb-3 mb-md-0">
                                <label for="email1" class="form-label">Email 1</label>
                                <input type="email" class="form-control" id="email1" name="email1">
                            </div>
                            <div class="col-md-6">
                                <label for="email2" class="form-label">Email 2</label>
                                <input type="email" class="form-control" id="email2" name="email2">
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <div class="row">
                            <div class="col-md-4 mb-3 mb-md-0">
                                <label for="website" class="form-label">Website</label>
                                <input type="url" class="form-control" id="website" name="website">
                            </div>
                            <div class="col-md-4 mb-3 mb-md-0">
                                <label for="fax" class="form-label">Fax</label>
                                <input type="text" class="form-control" id="fax" name="fax">
                            </div>
                            <div class="col-md-4">
                                <label for="po_box" class="form-label">P.O. Box</label>
                                <input type="text" class="form-control" id="po_box" name="po_box">
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="description" class="form-label">Description*</label>
                        <textarea class="form-control" id="description" name="description" rows="4" required></textarea>
                    </div>

                    <div class="mb-3">
                        <label for="other" class="form-label">Other</label>
                        <textarea class="form-control" id="other" name="other" rows="4"></textarea>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Logo*</label>
                        <div class="file-upload">
                            <input type="file" class="form-control" id="logo" name="logo" accept="image/*" required>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">VAT/PAN Certificate*</label>
                        <div class="file-upload">
                            <input type="file" class="form-control" id="vat_pan" name="vat_pan" accept=".pdf,.jpg,.jpeg,.png" required>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Letter</label>
                        <div class="file-upload">
                            <input type="file" class="form-control" id="letter" name="letter" accept=".pdf,.doc,.docx">
                        </div>
                        <small class="text-muted"><i>Note: To update an already existing company's information, the company must submit a letter on its official letterhead.</i></small>
                    </div>

                    <div class="text-center">
                        <button type="submit" class="btn btn-primary">Submit</button>
                        <div class="loading-spinner"></div>
                    </div>
                </form>

                <div id="directorySuccessMessage" class="success-message">
                    Form submitted successfully!
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Function to switch to Directory tab
        function switchToDirectory() {
            document.querySelector('#directory-tab').click();
        }

        // Function to handle first-time radio buttons
        function handleFirstTimeRadio(formId) {
            const form = document.getElementById(formId);
            const radioButtons = form.querySelectorAll('input[name="is_first_time"]');
            const formContent = form.querySelector('.form-content');
            const directoryPrompt = form.querySelector('.directory-prompt');

            radioButtons.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'yes') {
                        formContent.style.display = 'none';
                        directoryPrompt.style.display = 'block';
                    } else {
                        formContent.style.display = 'block';
                        directoryPrompt.style.display = 'none';
                    }
                });
            });
        }

        // Initialize first-time radio handlers
        handleFirstTimeRadio('vacancyForm');
        handleFirstTimeRadio('noticeForm');

        // Function to handle form submission
        function handleFormSubmit(formId, successMessageId) {
            const form = document.getElementById(formId);
            
            // Create error container if it doesn't exist
            let errorContainer = form.querySelector('.error-container');
            if (!errorContainer) {
                errorContainer = document.createElement('div');
                errorContainer.className = 'error-container mt-3';
                errorContainer.style.color = 'red';
                errorContainer.style.textAlign = 'left';
                
                // Insert error container after submit button
                const submitButton = form.querySelector('button[type="submit"]');
                submitButton.parentNode.insertBefore(errorContainer, submitButton.nextSibling);
            }

            form.addEventListener('submit', async function(event) {
                event.preventDefault();
                
                // Clear previous errors
                errorContainer.innerHTML = '';
                
                // Validate form and collect errors
                const errors = [];
                const inputs = form.querySelectorAll('input, select, textarea');
                
                // Field name mappings for special cases
                const fieldNameMappings = {
                    'short_description': 'Short Description',
                    'job_description': 'Job Description',
                    'requirements': 'Requirements',
                    'responsibilities': 'Responsibilities',
                    'notice_images': 'Notice Images',
                    'logo': 'Logo',
                    'vat_pan': 'VAT/PAN Certificate'
                };
                
                inputs.forEach(input => {
                    if (input.required && !input.value) {
                        let fieldName = '';
                        // Check if it's a special case field
                        if (fieldNameMappings[input.id]) {
                            fieldName = fieldNameMappings[input.id];
                        } else {
                            // Get the label text for other fields
                            fieldName = input.previousElementSibling?.textContent || input.name;
                            fieldName = fieldName.replace('*', '').trim();
                        }
                        errors.push(`${fieldName} is Required`);
                    }
                    
                    if (input.type === 'email' && input.value && !isValidEmail(input.value)) {
                        errors.push('Please enter a valid email address');
                    }
                    
                    if (input.type === 'url' && input.value && !isValidUrl(input.value)) {
                        errors.push('Please enter a valid website URL');
                    }
                    
                    if (input.type === 'tel' && input.value && !isValidPhone(input.value)) {
                        errors.push('Please enter a valid phone number');
                    }
                });

                if (errors.length > 0) {
                    // Display errors
                    errorContainer.innerHTML = errors.map(error => `<div>• ${error}</div>`).join('');
                    form.classList.add('was-validated');
                    return;
                }

                // Check if it's a first-time submission
                const isFirstTime = this.querySelector('input[name="is_first_time"]:checked')?.value === 'yes';
                if (isFirstTime && formId !== 'directoryForm') {
                    alert('Please fill out the Directory Form first before submitting this form.');
                    switchToDirectory();
                    return;
                }

                // Show loading spinner
                const spinner = this.querySelector('.loading-spinner');
                const submitButton = this.querySelector('button[type="submit"]');
                spinner.style.display = 'block';
                submitButton.disabled = true;

                try {
                    const formData = new FormData(this);
                    formData.append('form_type', formId.replace('Form', '').toLowerCase());

                    // Handle file uploads based on form type
                    if (formId === 'noticeForm') {
                        const noticeImages = this.querySelector('#notice_images').files;
                        if (noticeImages.length > 0) {
                            for (let i = 0; i < noticeImages.length; i++) {
                                formData.append('notice_images[]', noticeImages[i]);
                            }
                        }
                    } else if (formId === 'directoryForm') {
                        const logo = this.querySelector('#logo').files[0];
                        const vatPan = this.querySelector('#vat_pan').files[0];
                        const letter = this.querySelector('#letter').files[0];
                        
                        if (logo) formData.append('logo', logo);
                        if (vatPan) formData.append('vat_pan', vatPan);
                        if (letter) formData.append('letter', letter);
                    }

                    const response = await fetch('https://script.google.com/macros/s/AKfycbwky1yCVngmXLf7wcbdaeq0luMl68BHYfc2O18jj5LITv438gxn9OS4srIvstZpb_e2ZQ/exec', {
                        method: 'POST',
                        body: formData
                    });

                    // Show success message
                    const successMessage = document.getElementById(successMessageId);
                    successMessage.style.display = 'block';
                    successMessage.textContent = 'Form submitted successfully!';

                    // Reset form and errors
                    this.reset();
                    this.classList.remove('was-validated');
                    errorContainer.innerHTML = '';
                    
                    // Reset form content visibility
                    const formContent = this.querySelector('.form-content');
                    if (formContent) {
                        formContent.style.display = 'none';
                    }

                    // Hide success message after 5 seconds
                    setTimeout(() => {
                        successMessage.style.display = 'none';
                    }, 5000);

                } catch (error) {
                    console.error('Error:', error);
                    errorContainer.innerHTML = '<div>• Error submitting form. Please try again.</div>';
                } finally {
                    spinner.style.display = 'none';
                    submitButton.disabled = false;
                }
            });
        }

        // Add validation helper functions
        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function isValidUrl(url) {
            try {
                new URL(url);
                return true;
            } catch {
                return false;
            }
        }

        function isValidPhone(phone) {
            return /^[0-9\-\+\(\)\s]{7,}$/.test(phone);
        }

        // Initialize all forms
        handleFormSubmit('vacancyForm', 'vacancySuccessMessage');
        handleFormSubmit('noticeForm', 'noticeSuccessMessage');
        handleFormSubmit('directoryForm', 'directorySuccessMessage');
    </script>
</body>
</html> 